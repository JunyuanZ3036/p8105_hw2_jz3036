---
title: "p8105_hw2_jz3036"
output: github_document
author: "Junyuan Zheng (jz3036)"
date: 2018-09-30
---

* Import necessary packages.
```{r import_packages}
library(tidyverse)
```


# Problem 1

* Import the raw data for Problem 1.
```{r data_import}
data_p1 = 
  read_csv(file='./raw_data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv') %>%
  janitor::clean_names(.) %>%
  select(., line:entry, vending, ada) %>%
  mutate(., entry = recode(entry, YES = TRUE, NO = FALSE))
head(data_p1)
```

* Variables in the original dataset include division, line, station name, route1-7, entrance type, entry, exit only, vending, staffing, staff hours, ada_notes, north south street, east west street, corner and station location in __characters__; station latitude longitude, entrance latitude longitude in __double__; route8-11 in __integer__; ada, free crossover in __logical__ variable.
* As the pipeline shown above, after importing the raw data, I use the __janitor::clean_names()__ function to change the column names into snake-shape. Then use the __select()__ function to select columns required. Finally, use the __mutate()__ and __recode()__ function to change the "entry" column into logical variable.
* The data after cleaning steps includes `r dim(data_p1)[1]` rows and `r dim(data_p1)[2]` columns.
* As for the column of each variable, I think the data after manipulation is fine. On the other hand, some routes are in charaters and others are in integers, which could be confusing. Besides, since we no longer care about the "entrance location" from original dataset, there are some rows that are identical to others, for which we could probably merge them into one.

```{r}
distinct_station = distinct(data_p1, station_name, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11)
```
* There are __`r nrow(distinct_station)`__ distinct stations.

```{r}
select_ada = filter(data_p1, ada == TRUE)
```
* There are __`r nrow(select_ada)`__ stations that are ADA compliant.

```{r}
vending_F_entry_T = filter(data_p1, vending == 'NO', entry == TRUE)
```
* The proportion of station without vending while allow entrance is __`r nrow(vending_F_entry_T)/nrow(data_p1)`__.

Reformat data so that route number and route name are distinct variables:
```{r}
data_p1_re = 
  gather(data_p1, key = route_number, value = route_name, route1:route11) %>%
  separate(., route_number, into = c('route', 'route_number'), sep = "e") %>%
  select(., -'route')
```

```{r}
distinct_station_A =
  filter(data_p1_re, route_name == 'A') %>%
  distinct(., station_name)
```
* There are `r nrow(distinct_station_A)` distinct stations serve the A train.

```{r}
distinct_station_A_ada = filter(data_p1_re, route_name == 'A', ada == 'TRUE')
```
* There are `r nrow(distinct_station_A_ada)` stations serve the A train and ADA compliant.

# Problem 2