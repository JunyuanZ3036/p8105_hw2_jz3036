p8105\_hw2\_jz3036
================
Junyuan Zheng (jz3036)
2018-09-30

-   Import necessary packages.

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────────────────────────── tidyverse 1.2.1 ──

    ## ✔ ggplot2 3.0.0     ✔ purrr   0.2.5
    ## ✔ tibble  1.4.2     ✔ dplyr   0.7.6
    ## ✔ tidyr   0.8.1     ✔ stringr 1.3.1
    ## ✔ readr   1.1.1     ✔ forcats 0.3.0

    ## ── Conflicts ────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

Problem 1
=========

-   Import the raw data for Problem 1.

``` r
data_p1 = 
  read_csv(file='./raw_data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv') %>%
  janitor::clean_names(.) %>%
  select(., line:entry, vending, ada) %>%
  mutate(., entry = recode(entry, YES = TRUE, NO = FALSE))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_integer(),
    ##   Route9 = col_integer(),
    ##   Route10 = col_integer(),
    ##   Route11 = col_integer(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
head(data_p1)
```

    ## # A tibble: 6 x 19
    ##   line  station_name station_latitude station_longitu… route1 route2 route3
    ##   <chr> <chr>                   <dbl>            <dbl> <chr>  <chr>  <chr> 
    ## 1 4 Av… 25th St                  40.7            -74.0 R      <NA>   <NA>  
    ## 2 4 Av… 25th St                  40.7            -74.0 R      <NA>   <NA>  
    ## 3 4 Av… 36th St                  40.7            -74.0 N      R      <NA>  
    ## 4 4 Av… 36th St                  40.7            -74.0 N      R      <NA>  
    ## 5 4 Av… 36th St                  40.7            -74.0 N      R      <NA>  
    ## 6 4 Av… 45th St                  40.6            -74.0 R      <NA>   <NA>  
    ## # ... with 12 more variables: route4 <chr>, route5 <chr>, route6 <chr>,
    ## #   route7 <chr>, route8 <int>, route9 <int>, route10 <int>,
    ## #   route11 <int>, entrance_type <chr>, entry <lgl>, vending <chr>,
    ## #   ada <lgl>

-   Variables in the original dataset include division, line, station name, route1-7, entrance type, entry, exit only, vending, staffing, staff hours, ada\_notes, north south street, east west street, corner and station location in **characters**; station latitude longitude, entrance latitude longitude in **double**; route8-11 in **integer**; ada, free crossover in **logical** variable.
-   As the pipeline shown above, after importing the raw data, I use the **janitor::clean\_names()** function to change the column names into snake-shape. Then use the **select()** function to select columns required. Finally, use the **mutate()** and **recode()** function to change the "entry" column into logical variable.
-   The data after cleaning steps includes 1868 rows and 19 columns.
-   As for the column of each variable, I think the data after manipulation is fine. On the other hand, some routes are in charaters and others are in integers, which could be confusing. Besides, since we no longer care about the "entrance location" from original dataset, there are some rows that are identical to others, for which we could probably merge them into one.

``` r
distinct_station = distinct(data_p1, station_name, route1, route2, route3, route4, route5, route6, route7, route8, route9, route10, route11)
```

-   There are **456** distinct stations.

``` r
select_ada = filter(data_p1, ada == TRUE)
```

-   There are **468** stations that are ADA compliant.

``` r
vending_F_entry_T = filter(data_p1, vending == 'NO', entry == TRUE)
```

-   The proportion of station without vending while allow entrance is **0.0369379**.

Reformat data so that route number and route name are distinct variables:

``` r
data_p1_re = 
  gather(data_p1, key = route_number, value = route_name, route1:route11) %>%
  separate(., route_number, into = c('route', 'route_number'), sep = "e") %>%
  select(., -'route')
```

``` r
distinct_station_A =
  filter(data_p1_re, route_name == 'A') %>%
  distinct(., station_name)
```

-   There are 56 distinct stations serve the A train.

``` r
distinct_station_A_ada = filter(data_p1_re, route_name == 'A', ada == 'TRUE')
```

-   There are 107 stations serve the A train and ADA compliant.

Problem 2
=========
